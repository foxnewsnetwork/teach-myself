{"data":{"markdownRemark":{"html":"<h1 id=\"first-steps-and-forward-strategy-for-graphing-on-zeit\"><a href=\"#first-steps-and-forward-strategy-for-graphing-on-zeit\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>First Steps and Forward Strategy for Graphing on Zeit</h1>\n<p>The idea here to come up with a strategy and goal for building out graphing endpoints on zeit.co as inspired by <a href=\"https://shd101wyy.github.io/markdown-preview-enhanced/#/\">enhanced markdown preview</a></p>\n<h2 id=\"rendering-goals\"><a href=\"#rendering-goals\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rendering Goals</h2>\n<p>Currently, the enhanced markdown preview offers rendering for the following mark-ups:</p>\n<ul>\n<li><a href=\"https://shd101wyy.github.io/markdown-preview-enhanced/#/math\">KateX / MathJax</a></li>\n<li><a href=\"http://flowchart.js.org/\">FlowChart.js</a></li>\n<li><a href=\"https://bramp.github.io/js-sequence-diagrams/\">js sequence diagrams</a></li>\n<li><a href=\"https://github.com/knsv/mermaid\">mermaid</a></li>\n<li><a href=\"http://plantuml.com/\">plantuml</a></li>\n<li><a href=\"http://wavedrom.com/\">wavedrom</a></li>\n<li><a href=\"https://github.com/mdaines/viz.js\">graphviz</a></li>\n<li><a href=\"https://vega.github.io/vega/\">vega / vega lit</a></li>\n<li><a href=\"https://github.com/stathissideris/ditaa\">ditaa</a></li>\n</ul>\n<p>For further reading, here is the <a href=\"https://github.com/fasouto/awesome-dataviz\">curated list of awesome visualization</a></p>\n<p>The desired techbical goal is to essentially build graphizo myself for the above 9 renderers:</p>\n<details>\n<summary>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/teach-myself/static/5b12a2a4cfa031521cc7f4229cb7130c/6d6d3/render-stack.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 672px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 46.723044397463006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABBElEQVQoz41Rya6EMAzr//8c4sqVRez7TkkmjqjEe6DRRLJIU8cxqWHmTWCJSHHP3XmaJpumqd227fXefQFzHb7GeZ5cliX/EuZSRpADQkRo33ea55mKoqAwDKlpGhKXeoe49ziow+M4WEDyazwMA7dtq46ALMu4rmvN8zzXM3IRV+44jnz1wwmbqqpsFEUgk+yJATQC4ozjOGYMQr3rOhVE3XGSJNE7aGCQwaIFaKK+77UJjgAZxqjBCZqRw5m7Bxc1uITGuq6PHbK1lmV3vCyLkjHV8zwOgoB931cROIYAuI9Hca9M5Pb8DOwHe8Vr/w/03PFH8I2AkJfWXcL5G8fx8P0ATIS8ltOhZSkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"rendered digraph\"\n        title=\"\"\n        src=\"/teach-myself/static/5b12a2a4cfa031521cc7f4229cb7130c/e372f/render-stack.png\"\n        srcset=\"/teach-myself/static/5b12a2a4cfa031521cc7f4229cb7130c/26d00/render-stack.png 168w,\n/teach-myself/static/5b12a2a4cfa031521cc7f4229cb7130c/6bdce/render-stack.png 336w,\n/teach-myself/static/5b12a2a4cfa031521cc7f4229cb7130c/e372f/render-stack.png 672w,\n/teach-myself/static/5b12a2a4cfa031521cc7f4229cb7130c/6d6d3/render-stack.png 946w\"\n        sizes=\"(max-width: 672px) 100vw, 672px\"\n      />\n  </span>\n  </a></p>\n</summary>\n<div class=\"gatsby-highlight\" data-language=\"dot\"><pre class=\"language-dot\"><code class=\"language-dot\">digraph G {\n  GET -&gt; Decider\n  Decider -&gt; math\n  Decider -&gt; flow\n  Decider -&gt; seq\n  Decider -&gt; mermaid\n  Decider -&gt; puml\n  Decider -&gt; wave\n  Decider -&gt; dot\n  Decider -&gt; vega\n  Decider -&gt; ditaa\n  math -&gt; PNG\n  flow -&gt; PNG\n  seq -&gt; PNG\n  mermaid -&gt; PNG\n  puml -&gt; PNG\n  wave -&gt; PNG\n  dot -&gt; PNG\n  vega -&gt; PNG\n  ditaa -&gt; PNG\n  PNG -&gt; Resp\n}</code></pre></div>\n</details>\n<blockquote>\n<p>NOTE TO SELF: I should build some plugins into this blog site so that I can get proper graph rendering instead of manually copy+pasting stuff into say <a href=\"http://viz-js.com/\">vis-js.com</a></p>\n</blockquote>\n<h2 id=\"business-direction\"><a href=\"#business-direction\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Business Direction</h2>\n<p>So the question here would be how to make money with this thing. The idea would be to then rent rendering services to corporations and offer them the ability to customize what DNS and domains can hit what save diagram</p>\n<p>So... how do we do this? At this point, I'm not too sure, so I'll have some research to do.</p>\n<p>A good starting point might be <a href=\"http://www.gravizo.com/#pricing\">graphizo's pricing</a>:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/49a2d/graphizo-pricing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 672px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 42.26190476190476%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAB40lEQVQoz0WRzW8SURTF2ZgCQydIq/2gGG2NadHYLxMlxrbWdOPClVtdujBRW0oZGGbGMl8MwwADyldc+w90ZdwY/7LjeU8TFzeTuefd837nvsSyHWLL7yFbbyJ5YULRPkOpWlAMF3ecDu55XWy4HWT+9dOsrOVjs9XDXTfCujjjd1G4bCFNj8QtHn4xnGI/HGA76GGxdolUWYdCcZe959SOBlNseRHS5w2kWAumJ3sH8QSHgwmK1HKaJWFoGFGc4GT0DcdfZlikkTTUbTwM+jiiodD2O8P/hiR82h/zspnUCvy/dlpDhjCJAgmPOVTqfcVtgV0xoHBIGG63Y3nJHklv8l8YCn3B9Ek2xbN4LOnmxarEjDDMO6EkFLfMndUlgSAU+9gJY5KMkGWcOfaEJr45EZkQRT9iT0dSaCKVJgztDg7jGdabAVYMB3nTxRpLbTh40IrxJBpjRfewykdaszwssZ8j4QFndoIhlnQXqzyfp66KR8m7LTyOQyzzYIZxVOKrF4xdt1FsB3jUbzOiBlX7q2VY100HpUEX90MX2UYVatXEPGflDjdGGk6u3iFVYcxzU+4oXWkgWWui9P0D3v4u4/XPT7hhl5E8MxnRQs4x8OrHe7z5VcHLq4/cncbIhtzhH+xRVvYSwZAXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"graphizo-pricing choices\"\n        title=\"\"\n        src=\"/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/e372f/graphizo-pricing.png\"\n        srcset=\"/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/26d00/graphizo-pricing.png 168w,\n/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/6bdce/graphizo-pricing.png 336w,\n/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/e372f/graphizo-pricing.png 672w,\n/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/cc870/graphizo-pricing.png 1008w,\n/teach-myself/static/b3894aafa0dde20c75bb6927dff94ff1/49a2d/graphizo-pricing.png 1176w\"\n        sizes=\"(max-width: 672px) 100vw, 672px\"\n      />\n  </span>\n  </a></p>\n<p>In any case, I think a list of @TODOs in the following order makes sense:</p>\n<ul>\n<li>Step up 2 renderers on zeit</li>\n<li>Step up decider on zeit</li>\n<li>Ensure rendered results can properly show up in slack</li>\n<li>Setup slack bot to automate generating the URL</li>\n<li>Figure out how to setup DNS and CDNs</li>\n<li>Connect with some sort of subscription payment system</li>\n<li>Setup domain</li>\n<li>Test live</li>\n</ul>\n<h2 id=\"setting-up-flowchartjs\"><a href=\"#setting-up-flowchartjs\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up FlowChart.JS</h2>\n<p>The rest of this blog will be about me setting up the <a href=\"https://github.com/adrai/flowchart.js\">FlowChart</a> onto zeit so that I can prove to myself it can be made to generate PNGs</p>\n<p>The code for this can be found in my <a href=\"https://github.com/foxnewsnetwork/sandbox-serverless/tree/master/api/flowchart\">serverless sandbox</a></p>\n<ul>\n<li>FlowChart.js uses Raphael to draw SVGs</li>\n<li>We must use a SVG to PNG converter such as <a href=\"https://www.npmjs.com/package/convert-svg-to-png\">this</a> to send down a file from text</li>\n</ul>\n<p>From their github, it looks like they straight-up must load chrominum to take a screenshot. I have no idea if this will work in a lambda environment where I am contrained to slug sizes</p>\n<blockquote>\n<p>It works by using headless Chromium to take a screenshot of the SVG and outputs the buffer. This does mean that the supported output formats is limited to those supported by that the API for headless Chromium, however, as more formats are added, additional packages can easily be created.</p>\n</blockquote>\n<h2 id=\"uh-oh-bad-news\"><a href=\"#uh-oh-bad-news\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uh-oh, bad news</h2>\n<p>After investigation, it seems to properly render FlowChart (and possibly other dom-based things), we can't go full serverless due to cold-boot and slug-size requirements.</p>\n<p>This means that I'll have to look into using docker images and containers to string together a bunch of docker services to perform this job. </p>\n<p>I'll have to figure out how to do that in a future blog post</p>","timeToRead":3,"excerpt":"First Steps and Forward Strategy for Graphing on Zeit The idea here to come up with a strategy and goal for building out graphing endpoints…","frontmatter":{"title":"First Steps into Rendering with Zeit","cover":"2019-02-17/markdown-preview.png","date":"2019-02-17","category":"development","tags":["uml","diagram","graphs","business","research","backend"]},"fields":{"nextTitle":"Exploration into Serverless Backend with Zeit","nextSlug":"/exploration-into-serverless-backend-with-zeit","prevTitle":"Hello Gatsby","prevSlug":"/hello-gatsby","slug":"/first-steps-into-rendering-with-zeit","date":"2019-02-17T08:00:00.000Z"}}},"pageContext":{"slug":"/first-steps-into-rendering-with-zeit"}}